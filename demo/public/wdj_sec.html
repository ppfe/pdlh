<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"
    />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="white" />
    <title>WDJ高速下载DEMO</title>
    <meta name="description" content="豌豆荚" />

    <script src="//g.alicdn.com/AWSC/AWSC/awsc.js"></script>

    <style>
      html,
      body {
        overflow-x: hidden;
      }
      body,
      div,
      dl,
      dt,
      dd,
      ul,
      ol,
      li,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      pre,
      form,
      fieldset,
      input,
      textarea,
      p,
      blockquote,
      th,
      td {
        margin: 0;
        padding: 0;
      }
      table {
        border-collapse: collapse;
        border-spacing: 0;
      }
      fieldset,
      img,
      iframe {
        border: 0 none;
      }
      address,
      caption,
      cite,
      code,
      dfn,
      em,
      strong,
      th,
      var {
        font-style: normal;
        font-weight: 400;
      }
      ol,
      ul,
      li {
        list-style: none;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-size: 100%;
        font-weight: 400;
      }
      button,
      input,
      select,
      textarea {
        font-size: 100%;
      }
      q:before,
      q:after {
        content: '';
      }
      a {
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }

      body {
        font: 14px/1.5 Microsoft YaHei, Arial, sans-serif;
      }
      img {
        vertical-align: top;
      }
      input {
        width: 400px;
      }
    </style>
  </head>

  <body>
    <ul>
      <li class="require">
        <label>ch_src</label>
        <input
          type="text"
          id="inputInitChannel"
          value="pm_pc6"
          placeholder="来源渠道/一级渠道"
        />
      </li>
      <li class="require">
        <label>ch</label>
        <input
          type="text"
          id="inputInitCh"
          value="default"
          placeholder="来源栏目/二级渠道"
        />
      </li>
      <li class="require">
        <label>packageName</label>
        <input
          type="text"
          id="inputInitPackageName"
          value="com.ss.android.ugc.aweme"
          placeholder="目标APP包名"
        />
      </li>
      <li>
        <label>server</label>
        <input
          type="text"
          id="inputInitServer"
          value="http://dev.server.m.pp.cn"
          placeholder="服务器地址"
        />
      </li>
    </ul>
    <button class="btn" id="btnInit">sdk 初始化</button>
    <br /><br /><br /><br />

    <ul>
      <li class="require">
        <label>ch</label>
        <input
          type="text"
          id="inputCheckCh"
          value="default"
          placeholder="来源栏目/二级渠道"
        />
      </li>
      <li class="require">
        <label>packageName</label>
        <input
          type="text"
          id="inputCheckPackageName"
          value="com.ss.android.ugc.aweme"
          placeholder="目标APP包名"
        />
      </li>
    </ul>
    <button class="btn" id="btnCheck">检测包名(初始化配置)</button>
    <button class="btn" id="btnCheckCustom">检测包名(自定义配置)</button>
    <br /><br /><br /><br />

    <ul>
      <li class="require">
        <label>ch</label>
        <input
          type="text"
          id="inputNormalCh"
          value="default"
          placeholder="来源栏目/二级渠道"
        />
      </li>
      <li class="require">
        <label>packageName</label>
        <input
          type="text"
          id="inputNormalPackageName"
          value="com.ss.android.ugc.aweme"
          placeholder="目标APP包名"
        />
      </li>
    </ul>
    <button class="btn" id="btnNormal">普通下载(初始化配置)</button>
    <button class="btn" id="btnNormalCustom">普通下载(自定义配置)</button>

    <br /><br /><br /><br />
    <ul>
      <li class="require">
        <label>ch</label>
        <input
          type="text"
          id="inputFastCh"
          value="default"
          placeholder="来源栏目/二级渠道"
        />
      </li>
      <li class="require">
        <label>packageName</label>
        <input
          type="text"
          id="inputFastPackageName"
          value="com.ss.android.ugc.aweme"
          placeholder="目标APP包名"
        />
      </li>
    </ul>
    <button class="btn" id="btnFast">高速下载(初始化配置)</button>
    <button class="btn" id="btnFastCustom">高速下载(自定义配置)</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
    <!-- <script src="http://a.img.pp.cn/upload_files/js/wdj-dl-highspeed.js?2016101701"></script> -->
    <script src="./wdj-dl-highspeed-sec.js?2016101701"></script>

    <script type="text/javascript">
      // 刚进页面用于检测应用是否存在

      //   Wdlh.downloadFast('com.ss.android.ugc.aweme', 'pm_pc6', 'default', {
      //     server: 'http://30.102.224.91'
      //   });

      function checkExist(options) {
        Wdlh.checkExist(function(ret) {
            if (!ret.code) {
              console.log('Wdlh.checkExist ok.');
            } else {
              console.log('Wdlh.checkExist failed.');
            }

            console.dir(ret);
          }, options);
      }

      $('#btnCheck').click(function() {
        checkExist();
      });

      $('#btnCheckCustom').click(function() {
        var ch = $('#inputNormalCh').val(),
          packageName = $('#inputNormalPackageName').val();

        checkExist({
          packageName: packageName,
          ch: ch
        });
      });

      $('#btnInit').click(function() {
        var channel = $('#inputInitChannel').val(),
          ch = $('#inputInitCh').val(),
          packageName = $('#inputInitPackageName').val(),
          server = $('#inputInitServer').val();

        Wdlh.init({
          packageName: packageName,
          channel: channel,
          ch: ch,
          server: server || 'http://30.102.224.91'
        });
      });

      function downloadNormal(options) {
        try {
          Wdlh.downloadNormal(function(ret) {
            if (!ret.code) {
              console.log('Wdlh.downloadNormal ok.');
            } else {
              console.log('Wdlh.downloadNormal failed.');
            }

            console.dir(ret);
          }, options);
        } catch (e) {
          alert('e:' + e);
        }
      }

      $('#btnNormal').click(function() {
        downloadNormal();
      });

      $('#btnNormalCustom').click(function() {
        var ch = $('#inputNormalCh').val(),
          packageName = $('#inputNormalPackageName').val();

        downloadNormal({
          packageName: packageName,
          ch: ch
        });
      });

      function downloadFast(options) {
        try {
          Wdlh.downloadFast(function(ret) {
            if (!ret.code) {
              console.log('Wdlh.downloadFast ok.');
            } else {
              console.warn('Wdlh.downloadFast failed.');
            }
            console.dir(ret);
          }, options);
        } catch (e) {
          alert('e:' + e);
        }
      }

      $('#btnFast').click(function() {
        downloadFast();
      });

      $('#btnFast').click(function() {
        var ch = $('#inputFastCh').val(),
          packageName = $('#inputFastPackageName').val();

        downloadFast({
          packageName: packageName,
          ch: ch
        });
      });
    </script>
  </body>
</html>
